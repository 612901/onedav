* 反馈和建议联系QQ:271152681
* PS:各位大哥,如果可以的话麻烦大家帮忙宣传一下..目前用户数太少了 :sob: ,根本没动力更新!
* CDN加速服务 //libs.xiaoz.top/lm21/onenav 感谢小z提供的支持

## 2022/03/12
* 新增安装引导,未检测到lm.user.db3时自动进入安装引导
* 支持从原版升级安装(检测是否存在onenav.db3和config.php).可保留除主题配置外的所有数据!
* 支持全新安装(如果存在原版库请自行删除!未检测到原版数据库时安装模式为全新安装)
* 注:全新安装时如果检测到用户数据库会询问是否保留,仅支持保留落幕魔改版的数据库!
* 修复链接列表修改连接分类失效(上个版本带来的bug,我的锅)
* 新增安全检测:db3数据库能否被下载,存在隐患时给出提示(管理员账号访问后台首页时触发)
* 后台相关信息显示最新版本号(存在缓存机制,30分钟内不会重复获取!版本不同时仅显示红色文字!暂不弹窗提示!)
* 简化API入口代码
* 新增数据库更新功能 (暂不支持管理员批量升级用户数据库,访问后台首页时触发)
* 新增备用链接功能 (开启直连模式时无效)
* 新增过渡跳转页面 (开启直连模式时无效,已登录时1秒后跳转,未登录时5秒后跳转!存在备用链接时需手动点击)
* 初始数据库更新
* 注:关于API的问题,本项目和原版不同处:原版允许访客使用API读取公开数据,本项目不允许访客使用API

## 2022/03/08
* Layui v2.5.4 升级到 v2.6.8 ,配置中静态路径不是./static的请同步更新到服务器!2.5.4资源暂留!
* 后台UI优化移动端的兼容性
* 百素主题:Layui,holmes.js路径改到配置中静态路径,删除主题目录下的layui,holmes.js重复资源!

## 2022/03/07
* 修复PHP8报错的问题,但还是建议使用7.4,因为我开发测试都是在7.4的!其他版本有问题在反馈吧!
* 支持管理员修改用户账号.(修改前建议先备份data文件夹)
* SimpleWeb主题细节调整
* 修复刘桐序主题直达连接错误的bug,白天/夜间模式的bug,新增后台入口,去除logo
* 新增二级密码功能,设置后进入后台需要验证二级密码!包括首页的添加链接,删除链接均需验证!说白了不验证时只能阅览首页!(浏览器关闭时退出验证)

##  2022/03/05 更新内容 升级前请备份数据! 
* 选取原作的一些更新:手机登陆(成功返回主页),登陆漏洞,XSS漏洞,新增默认密码安全检测(仅在后台首页显示,不弹窗!)2.25
* 修复已知bug(内容比较多,不单独列出了)
* 登陆和注册页面优化
* 合并API文件,分开写太麻烦了..
* 允许用户重设登录入口,入口名算法改为随机生成,修复入口可以登陆其他账号的bug
* 登录入口解释:因为允许站长修改入口,如果修改的入口有用户泄漏的话就和公开没太大区别,所以就有了专属入口,当用户不知道公用接口名时只能用专属接口登录
* 站长删除用户时,禁止删除默认用户
* 账号设置新增:Key安全,HttpOnly,登陆保持 注:需要PHP5.2以上
* 管理员免密登陆强制使用HttpOnly,登陆保持为会话,最长有效期1小时!
* 全局配置新增:ICP备案号,自定义代码,底部代码,取消用户设置备案号的权限
* 新增百素大佬的新主题百素two
* 修复首页点击logo文字或图标跳转地址错误
* 修复部分主题二级目录运行出错问题
* 用户管理工具栏新增一个修复按钮,可以修复部分数据库问题,升级时建议点两下看到无可修复项就行
* 网站管理新增:防XSS脚本,防SQL注入! (会忽略自定义头部和底部代码XSS检测,因为检测的话基本上就没法用了..)
* 书签导入调整,加入防XSS,报告标题和URL截取前面30和50位
* 取消修改导航宽度,因为很多主题没有修改空间,准备加入单独的主题设置
* 主页设置新增主题风格2选项,1是PC端主题,2是移动端主题,访问主页时由后端通过浏览器UA识别终端类型来载入不同的主题配置,可以解决部分主题不兼容移动端的尴尬.
* 主题风格增加一个默认主题(原版),最大程度的保留原作的信息和样式!其他默认主题因为之前是没打算分享的,所以是按照自己的喜好精简了一些信息.
* 网站管理>用户管理:支持修改用户组(点击用户行的用户组单元格会弹出提示),支持修改用户密码! 注:不能对自己修改!
* 增加一个脚本,位于: /initial/SetAdmin.php 作用:全局配置错误无法访问时,管理员账号无法使用时强行修改相关配置,内有具体说明!


## 安装说明
* 和常规的网站安装大同小异,解压后直接访问网址自动安装!提示安装成功刷新网页自动进入后台!按需设置下就可以了!如有其他疑问 新建 Issue或者加我QQ沟通!

## 修改说明
* 支持多用户注册使用 Web自助申请 自助修改用户名和密码 (可关闭注册)
* 支持注册时记录用户注册IP和时间
* 支持登陆保护机制 多次登陆失败后会被限制 (防止被爆破)
* 支持隐藏登陆注册接口 (防止被爆破)
* 支持在非根目录运行
* 支持js css等静态库本地储存 同时也支持CDN
* 支持后台Web配置:标题,Logo,关键字,描述,备案号等等操作 (废弃原来的PHP配置,因为要注册多用户)
* 支持开关首页是否显示:回到顶部,快速添加,后台入口,以及可以隐藏登陆入口,关闭图标加载等
* 支持自定义CSS(头部代码),自定义底部代码 (考虑到多用户支持,取消了原有的自定义JS,可用底部代码代替!)
* 后台分类和链接列表做了一些优化,链接支持搜索(可指定分类),批量修改分类,置顶,记忆筛选状态等
* 分类列表支持搜索,批量删除和批量强制删除(分类下有链接时删除链接)
* 支持在列表直接修改数据,设置是否私有等便捷的操作
* 集成了一些主题 因为改动比较大 所以原来的第三方主题是无法直接使用的!需要适配的可以联系我! 
* 后台列表:支持自适应高度 默认显示20条 
* 分类列表:支持显示图标,新增修改可以直接选择图标,而不是用代码,支持 Layui 和 Font Awesome! 
* 后台新增一键添加,显示相关操作说明和生成好的代码 并加入参数识别,可传入分类ID,这样就自动帮你选好默认分类了.
* 其他安全性的优化,支持记录用户登陆日志 (目前只是记录到数据库,并未实现查看功能)
* 支持升级,自动修改数据表结构,自动把PHP的配置写入数据库 (但仍建议您备份好数据在升级!!!)
* 还有啥,想不起来了...因为前期修改没有考虑过要发布的,所以也没写更新记录! 
* 具体的自己测试吧..PHP7.4

下面的说明是原著的!
# OneNav  
使用PHP + SQLite 3开发的简约导航/书签管理器，xiaoz新作，欢迎体验。

![](https://i.bmp.ovh/imgs/2020/12/40f222b7da7a89c9.png)

![](https://img-blog.csdnimg.cn/img_convert/bd10e31f4e069fe222ca5f647586baf2.png)

![](https://img-blog.csdnimg.cn/img_convert/fbfa42b1bc9a4ff500f1746b8f84574d.png)

![](https://img-blog.csdnimg.cn/img_convert/ed3780e8d6e5cca40bcb88d502279817.png)

## 功能特色

* 支持后台管理
* 支持私有链接
* 支持书签批量导入
* 支持多种主题风格
* 支持链接信息自动识别
* 支持API
* 支持Docker部署
* 支持uTools插件

## 安装

**常规安装：**

1. 需安装PHP环境，并确保支持SQLite3
2. 下载源码解压到站点根目录
3. 将`config.simple.php`复制为`data/config.php`并填写自己的站点信息
5. 访问后台：`http://IP/index.php?c=login`

**Docker部署：**

```bash
docker run -itd --name="onenav" -p 80:80 \
    -e USER='xiaoz' -e PASSWORD='xiaoz.me' \
    -v /data/onenav:/data/wwwroot/default/data \
    helloz/onenav
```

* `USER`：设置用户名，上述设置为`xiaoz`
* `PASSWORD`：设置密码，上述设置为`xiaoz.me`
* `/data/onenav`：本机挂载目录，用于持久存储Onenav数据

> 更多说明，请参考帮助文档：https://www.yuque.com/helloz/onenav

## Demo

以下是OneNav部分用户演示站，排名不分先后。

* OneNav：[https://nav.rss.ink/](https://nav.rss.ink/)
* 千行书签：[http://www.52qx.club/](http://www.52qx.club/)
* 纽及书签：[http://www.1006788.com/](http://www.1006788.com/)

## 联系我

* Blog:https://www.xiaoz.me/
* QQ:337003006
* QQ群：147687134
* 社区支持：[https://dwz.ovh/vd0bw](https://dwz.ovh/vd0bw)

## 鸣谢

OneNav诞生离不开以下项目，在此表示感谢（排名不分先后）。

* [WebStackPage](https://github.com/WebStackPage/WebStackPage.github.io)
* [LayUI](https://github.com/sentsin/layui)
* [Medoo](https://github.com/catfan/Medoo)
* [MDUI](https://github.com/zdhxiong/mdui)
